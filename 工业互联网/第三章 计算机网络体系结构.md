### 网络体系结构
网络体系：为了完成计算机间的通信合作，把每个计算机**互联的功能**划分成定义明确的**层次**，规定了同层次间通信的**协议**及相邻层之间的**接口及服务**。
网络体系结构：网络体系中同层进程间通信的协议和相邻 层接口及服务的统称。
层次结构方法包括三个内容：分层及每层功能、服务与层间接口、协议。
OSI/RM分层结构的一些基本概念
* 层： 系统的逻辑划分，代表功能上相对独立的一个子系统 
	* （N）层表示OSI层次结构中的任一层， 
	* （N＋1）层表示指定层次的上邻层（层用户：本次服务使用者） 
	* （N－1）层表示指定层次的下邻层（服务提供者）
* 对等层：**不同**系统的**相同**层次
* 实体：某一层中具有**数据收发能力**的活动单元，一般指该层的**软件进程**和**实现该层协议的硬件单元**（比如IE进程或者网卡 上具有某种功能的模块）
* 对等实体：位于**不同**系统的**相同**层次中的**两个实体**（**协议作用在对等实体之间**）
* **通信协议**：为保证数据通信双方能够**正确而自动**的进行通信，制定的一套双方必须遵守的**规则、约定和标准**
* 服务：**某一层及其以下各层**的一种**能力**，通过接口提供给其相邻的上层
* 接口：相邻两层之间的**交互界面**，定义相邻两层之间的**操作**及下层对上层的**服务**
**计算机网络通信方式——对等通信**
**对等通信的实质——对等层实体之间的虚拟通信**

### 开放系统互联参考模型
开放系统
* 所遵循的标准是开放的
* 遵循标准开发的计算机系统是开放的
* 开放系统：遵循互联标准协议的实系统
OSI/RM七层模型
7应用层——处理网络应用
6表示层——数据表示
5会话层——主机间会话通信
4传输层——端到端的连接
3网络层——寻址和最短路径
2数据链路层——介质访问/接入
1物理层——二进制传输
**通信协议**：在网络系统中，为了保证数据通信双方能够**正确**而**自动**的进行通信，制定的一套双方必须遵守的**规则、约定与标准**。
* 通信协议具有层次性、可靠性、有效性
网络协议要包含三个要素：
* 语义：构成协议的**协议元素**含义的**解释**
* 语法：协议元素和数据组合的**格式**
* 时序：通信中各事件发生的**因果关系**

服务：本层向上邻层提供的**功能集合**
OSI增值服务的原则：本层的服务应是本层功能与下邻层服务的之和，即（N）服务＝（N）功能＋（N－1）服务层
服务访问点SAP：上层实体可以访问下层实体**提供的服务的地方**（位于接口上）
分类：
* 面向连接服务：每一次完整的数据传输都必须具有**建立连接**、**数据传输**和**终止连接**三个过程。
* 无连接服务：每个传送单元（报文、数据报）带有完整的目的地址，每个传送单元在系统中是**独立传送**的。
服务原语：提供层的具有**原子特征**的语句（提供层服务的方法）
原语：语句的执行具有原子特征，**不容许中断**
功能：本层利用服务原语来通知下邻层要做什么。下邻层利用服务原语来通知本层已做了什么
服务原语由原语名和原语参数两部分组成
![[Pasted image 20251024031508.png]]
数据单元（在网络中信息传送的单位/数据块）
* 协议数据单元PDU：**对等层协议**之间交换的数据单元的统称。 PDU的内容和格式由协议精确地定义：
* PCI：为实现协议而在传送的数据的首部或尾部加上的**控制信息**，如地址、序号信息、差错控制信息等
* （N）PDU传递给下层，作为（N－1）用户数据的一部分，直至对等层实体。
* 传输层及以下各层的PDU另外还有各自特定的名称
	* 传输层——报文或数据段
	* 网络层——分组或数据报
	* 数据链路层——数据帧
	* 物理层——比特
数据封装：一台计算机要发送数据到另外一台计算机，必须首先在数据前面加上特定的协议头部，这个过程称为**封装**。
![[Pasted image 20251024114233.png]]

### OSI各层概述
1. 物理层
	* 系统和通信介质的**接口**，实现**数据链路层实体间物理**连接
	1. .数据终端设备DTE、数据电路端接设备DCE 
		* DTE——希望通过网络互连的设备（入网设备），用于处理用户数据的设备，即通信系统中的信源和信宿，比如计算机。 
		* DCE——界于DTE和网络之间的设备，用于把DTE发出的数字信号转换成适合于在传输介质上传输的形式，反之亦然。如 MODEM
	2. 物理层的目的：提供与通信介质的**连接**，描述连接的特性，以建立、维护和释放物理连接；向上层提供**位信息的正确传送**。
	3. 物理层提供的服务 
		* 提供物理连接
		* 物理服务数据单元
		* 顺序化
		* 数据链路标识
		* 故障情况报告
		* 服务质量指标
2. 数据链路层：在不可靠的物理线路上实现数据的可靠传输，使之对网络层现为一条无措的传输线路
	1. 数据链路层的目的：在相邻网络实体间建立和释放数据链路连接
	2. 数据链路层的功能和服务：
		* 数据链路连接的建立和拆除
			应答：正向应答（网络中最常使用的方式）
		* 构成数据链路数据单元（PDU）
		* 数据链路连接的分裂－多链路规程（MLP）
		* 定界与同步（帧接收）
		* 顺序和流量控制
		* 差错控制（检测和恢复）
	3. 停止等待协议（实现流量控制、差错控制：适用于链路 层-应用层）
		1. 完全理想化的数据传输
		2. 具有最简单流量控制的数据链路层协议:由接收方控制发送方的数据流
		3. 实用的停止等待协议
		![[Pasted image 20251024131707.png]]
	4. 停止等待协议的算法![[Pasted image 20251024133041.png]]
	5.  连续ARQ 协议（实现流量控制、差错控制）（滑动窗口协议）
		在连续ARQ协议中，应当将已发送出去但未被确认的 数据帧的数目加以限制，由此，引出**滑动窗口**的概念
		* 发送窗口：对发送端进行流量控制
		* 接收窗口：每收到一个序号正确的帧，接收窗口就向前（即向右方） 滑动一个帧的位置。同时发送对该帧的确认
		![[Pasted image 20251024135531.png]]
	6.  选择重传ARQ 协议（实现流量控制、差错控制）
		* 这是$W_R>1$的情景，加大接收窗口，可避免重复传送那些本来已经正确到达接收端的数据帧，但我们付出的代价是在接收端要设置具有**相当容量的缓存空间**。
		![[Pasted image 20251024140442.png]]
3. 网络层
网络层的任务：把**源计算机**发出的信息分组经过适当的路径送到**目的计算机**， 从源端到目的端**可能要经过若干中间节点**。
网络层的作用：屏蔽各种**不同类型网络的差异**
网络层的地位：端到端数据传输的最低层，通信子网的最高层，
网络层的功能和服务：在源DCE端与目的的DCE端之间建立、维护、终止网络连接
	1. [[数据报]]服务——每个分组作为一个独立的信息单位传送
	2. [[虚电路服务]]——传输前先建立一条逻辑网络连接（虚电路），传输结束后拆除
	3. 路由选择（路径控制）路由选择是指网络的中间节点根据分组中的**目的地址**、 当前**通信网络的状况**（可使用的数据链路、各条链路的信息流量）以及依据**某种策略**（传输时间最短、传输路径最短等）或**路由选择算法**作出决策，以使分组尽快地通过网络送往目的地，避免网络拥塞。
		1. 路由选择的时机
			1. 数据报方式，每个分组都要做路由选择
			2. 虚电报方式，只需建立时做一次路由选择
		2. 路由选择算法特性：正确性、简单性、健壮性、稳定性、公平性、最优性
		3. 路由选择算法的分类
			1. 非自适应算法：不测量不利用，每个路由器内存储一张表格
			2. 自适应算法：动态适应网络流量和拓扑变化，路由信息在网络节点间传送，需定期更新它们的路由表格
		4. 最优化原则：如果路由器J 在路由器I 到K 的最优路由上，那么从J 到K 的最优路由会落在同一路由上
		5. 路由选择算法（一）最短路径路由算法（静态算法）[[Djikstra算法]]
					（二）扩散法——洪泛及选择洪泛算法
					1. 洪泛算法（静态）把收到的每一个分组，向除了该分组到来的线路外的所有 输出线路发送
					2. 选择洪泛算法：洪泛法的一种改进：将进来的每个分组仅发送到与正确方 向接近的线路上。
					（三）链路状态路由算法
4. 传输层
* 传输层特点：以上各层**面向应用**，以下各层**面向传输**。传输层位于**资源子网和通信子网**的交界处，为**源端主机到目的端主机**提供可靠的**透明数据传输**服务；屏蔽各类通信子网的差异。
* 传输层的功能
	1. 映射传输层地址（TSAP）到网络地址（NSAP）
	2. 多路复用与分割
	3. 传输连接的建立与释放
* TCP/IP协议中的端口：**传输层**与**上层**进行通信的**接口**；通信进程的唯一标识
* 流量控制与缓冲
	* 流量控制：利用**滑动窗口协议**或**可变滑动窗口协议**来实现收发双方处理能力不匹配的问题
	* 缓存：发送方必须建立缓存便于出粗重发，接收方视协议决定
5. 应用层
* 应用层是**网络**可向最终**用户提供应用服务的唯一窗口**，其目的是支持用户联网的应用要求。
### TCP/IP模型
TCP/IP模型包括4个概念层次：应用层（application）传输层（transport）网际层（internet，相当于网络层） 网络接口（network interface ，相当于数据链路层和物 理层）
![[Pasted image 20251024153816.png]]
1. TCP/IP的网际层
	* 功能：寻址、路由选择和打包
	* 四个主要协议：网际协议、Internet控制消息协议、地址解析协议、逆向地址解析协议
	* 核心协议IP协议
		1. 无连接的协议，负责将数据分组从源转发到目的地
		2. 功能：IP寻址、路由选择、分段及重组
		3. 本层提供无连接的传输服务。网际层的PDU称为IP数据报
2. TCP/IP的传输层
	* 在源节点和目的节点的两个**进程实体**之间提供**可靠的端到端**的数据传输。
	* 传输层提供了TCP和UDP两种协议
		* TCP是面向连接的可靠的传输协议
		* UDP是无连接的
3. TCP/IP的应用层
	* 应用层协议支持了文件传输、电子邮件、远程登录、网络管理、 Web浏览等应用。

